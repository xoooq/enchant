<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Minecraft Enchant Tool – Nur Text-Buttons</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', Arial, sans-serif;
      background: linear-gradient(120deg,#26223d 0%,#20202a 90%);
      color: #f5f5fa;
      margin: 0;
      min-height: 100vh;
    }
    .topbar {
      padding: 22px 18px 18px 18px;
      text-align: center;
      background:linear-gradient(90deg,#222840 66%,#a259f7 100%);
      color:#fff;
      font-size:1.38em;font-weight:700;letter-spacing:.05em;
      margin:0 0 30px 0;
      border-radius:0 0 18px 18px;
      box-shadow:0 4px 19px #0006;
    }
    .main {
      max-width: 1100px;
      margin: 0 auto 44px auto;
      background: #232440;
      color: #fff;
      border-radius: 17px;
      box-shadow: 0 5px 26px #0002;
      padding: 37px 20px 40px 20px;
    }
    h1 {color:#a259f7;text-align:center;font-size:2em;margin-top:0;}
    h2 {color:#a259f7;margin-bottom:11px;}
    .section{background:#29274e;border-radius:12px;padding:23px 12px 18px 12px;margin-bottom:23px;box-shadow:0 2px 12px #0001;}
    .items-row{
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(165px,1fr));
      gap:15px;
      margin-bottom:18px;
    }
    .item-btn{
      background:#181a23;
      color:#fff;
      border:none;
      outline:none;
      border-radius:13px;
      padding:26px 8px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      transition:box-shadow .14s,border .15s,background .12s,color .13s;
      font-size:1.22em;
      font-weight:700;
      letter-spacing:.03em;
      text-transform:uppercase;
      box-shadow:0 2px 10px #0002;
      border:2px solid transparent;
    }
    .item-btn.selected{
      background:#a259f7;
      color:#fff;
      box-shadow:0 1px 12px #a481e944;
      border:2.5px solid #ffd86b;
    }
    .enchant-row{display:flex;align-items:center;gap:15px;margin-bottom:13px;}
    .lv-buttons{display:flex;gap:8px;}
    .lv-btn{
      min-width:34px;font-size:1.09em;font-weight:600;padding:7px 10px;border:none;border-radius:7px;
      background:#121017;color:#ffd86b;transition:.12s; border:2px solid transparent;cursor:pointer;outline:none;
    }
    .lv-btn.selected,.lv-btn:active{
      background:#ffd86b;color:#291a32;border-color:#a259f7;font-weight:bold;box-shadow:0 1px 7px #a259f764;
    }
    .lv-btn[disabled]{opacity:0.46;background:#332037;color:#ffadc6;cursor:not-allowed;}
    .lv-btn.curse,.ench-label.curse{background:#2b1117!important;color:#ff4d63!important;border-color:#d12c3d;}
    .lv-btn.curse.selected,.lv-btn.curse:active{background:#ff4d63!important;color:#fff!important;}
    .ench-label.curse{color:#ff4d63!important; font-weight:bold;}
    .warn-bad{color:#ff4d63;font-weight:bold;font-size:1.03em;padding:0 4px;}
    .steps{margin:18px 0;}
    .step{background:#201539;border-radius:8px;margin-bottom:13px;padding:13px 17px 9px 17px;border-left:5px solid #a259f7;font-size:1.08em;}
    .warn{background:#321a23;color:#ffb9d1;font-weight:bold;border-radius:8px;margin-bottom:13px;padding:8px 10px;}
    .export{margin-top:18px;}
    pre.exportbox{background:#201539;color:#dbcfec;padding:13px 8px;border-radius:8px;margin-top:10px;overflow-x:auto;}
    .ench{color:#ffd86b;font-weight:bold;}
    .dech{color:#aee4eb;}
    .step em{font-style:italic;color:#ffd98a;font-weight:600;}
    @media(max-width:650px){.items-row{grid-template-columns:repeat(auto-fit, minmax(110px,1fr));}.item-btn{font-size:1em;padding:18px 3px;}}
    @media(max-width:690px){.main{padding:5vw 2vw;}}
  </style>
</head>
<body>
<div class="topbar">Minecraft Enchant Tool – Fett gedruckte Item-Buttons</div>
<div class="main">
  <h1>Enchanting Optimizer – Text-Items & Level Buttons</h1>
  <div class="section">
    <h2>Item auswählen (anklicken)</h2>
    <div class="items-row" id="itemrow"></div>
  </div>
  <div class="section">
    <h2>Verzauberungen & Stufen wählen</h2>
    <div id="enchants"></div>
  </div>
  <div class="section">
    <button onclick="calculate()">Berechnen</button>
    <div id="warn" class="warn" style="display:none"></div>
    <div id="steps" class="steps"></div>
  </div>
  <div class="section export">
    <h2>Exportieren</h2>
    <button onclick="copyExport()">Markdown kopieren</button>
    <pre id="exportBox" class="exportbox"></pre>
  </div>
</div>
<script>
const allItems=[
  {k:"diamond_helmet",txt:"DIAMOND HELMET"},
  {k:"diamond_chestplate",txt:"DIAMOND CHESTPLATE"},
  {k:"diamond_leggings",txt:"DIAMOND LEGGINGS"},
  {k:"diamond_boots",txt:"DIAMOND BOOTS"},
  {k:"turtle_shell",txt:"TURTLE SHELL"},
  {k:"sword",txt:"DIAMOND SWORD"},
  {k:"bow",txt:"BOW"},
  {k:"crossbow",txt:"CROSSBOW"},
  {k:"trident",txt:"TRIDENT"},
  {k:"pickaxe",txt:"DIAMOND PICKAXE"},
  {k:"axe",txt:"DIAMOND AXE"},
  {k:"shovel",txt:"DIAMOND SHOVEL"},
  {k:"hoe",txt:"DIAMOND HOE"},
  {k:"shears",txt:"SHEARS"},
  {k:"fishing_rod",txt:"FISHING ROD"},
  {k:"shield",txt:"SHIELD"},
  {k:"elytra",txt:"ELYTRA"},
  {k:"flint_and_steel",txt:"FLINT & STEEL"},
  {k:"carrot_on_a_stick",txt:"CARROT ON A STICK"},
  {k:"warped_fungus_on_a_stick",txt:"WARPED FUNGUS ON A STICK"},
  {k:"compass",txt:"COMPASS"},
  {k:"lodestone_compass",txt:"LODESTONE COMPASS"},
  {k:"recovery_compass",txt:"RECOVERY COMPASS"},
  {k:"all_books",txt:"ENCHANTED BOOK"}
];
const curseList=["curse_of_binding","curse_of_vanishing"];
const roman=["","I","II","III","IV","V","VI"];
const enchList={
  protection:{en:"Protection",de:"Schutz",max:4,cost:[0,1,2,3,4]},
  fire_protection:{en:"Fire Protection",de:"Feuerschutz",max:4,cost:[0,1,2,3,4]},
  blast_protection:{en:"Blast Protection",de:"Explosionsschutz",max:4,cost:[0,1,2,3,4]},
  projectile_protection:{en:"Projectile Protection",de:"Geschossschutz",max:4,cost:[0,1,2,3,4]},
  aqua_affinity:{en:"Aqua Affinity",de:"Wasseraffinität",max:1,cost:[0,2]},
  respiration:{en:"Respiration",de:"Atmung",max:3,cost:[0,4,8,12]},
  thorns:{en:"Thorns",de:"Dornen",max:3,cost:[0,8,16,24]},
  swift_sneak:{en:"Swift Sneak",de:"Schnellschleichen",max:3,cost:[0,1,2,3]},
  feather_falling:{en:"Feather Falling",de:"Federfall",max:4,cost:[0,1,2,3,4]},
  depth_strider:{en:"Depth Strider",de:"Wasserläufer",max:3,cost:[0,4,8,12]},
  frost_walker:{en:"Frost Walker",de:"Eisläufer",max:2,cost:[0,4,8]},
  soul_speed:{en:"Soul Speed",de:"Seelengeschwindigkeit",max:3,cost:[0,8,16,24]},
  sharpness:{en:"Sharpness",de:"Schärfe",max:5,cost:[0,1,2,3,4,5]},
  smite:{en:"Smite",de:"Bann",max:5,cost:[0,1,2,3,4,5]},
  bane:{en:"Bane of Arthropods",de:"Fluch der Gliederfüßer",max:5,cost:[0,1,2,3,4,5]},
  fire_aspect:{en:"Fire Aspect",de:"Feueraspekt",max:2,cost:[0,4,8]},
  knockback:{en:"Knockback",de:"Rückstoß",max:2,cost:[0,1,2]},
  looting:{en:"Looting",de:"Plünderung",max:3,cost:[0,4,8,12]},
  sweeping:{en:"Sweeping Edge",de:"Schwungkraft",max:3,cost:[0,4,8,12]},
  power:{en:"Power",de:"Stärke",max:5,cost:[0,1,2,3,4,6]},
  punch:{en:"Punch",de:"Schlag",max:2,cost:[0,4,8]},
  flame:{en:"Flame",de:"Flamme",max:1,cost:[0,4]},
  infinity:{en:"Infinity",de:"Unendlichkeit",max:1,cost:[0,8]},
  quick_charge:{en:"Quick Charge",de:"Schnellladen",max:3,cost:[0,1,2,3]},
  multishot:{en:"Multishot",de:"Mehrfachschuss",max:1,cost:[0,4]},
  piercing:{en:"Piercing",de:"Durchschlag",max:4,cost:[0,1,2,3,4]},
  loyalty:{en:"Loyalty",de:"Treue",max:3,cost:[0,1,2,3]},
  impaling:{en:"Impaling",de:"Harpune",max:5,cost:[0,4,8,12,16,20]},
  riptide:{en:"Riptide",de:"Sog",max:3,cost:[0,4,8,12]},
  channeling:{en:"Channeling",de:"Kanalisierung",max:1,cost:[0,8]},
  efficiency:{en:"Efficiency",de:"Effizienz",max:5,cost:[0,1,2,3,4,5]},
  unbreaking:{en:"Unbreaking",de:"Haltbarkeit",max:3,cost:[0,2,4,6]},
  fortune:{en:"Fortune",de:"Glück",max:3,cost:[0,4,8,12]},
  silk_touch:{en:"Silk Touch",de:"Behutsamkeit",max:1,cost:[0,16]},
  luck_of_the_sea:{en:"Luck of the Sea",de:"Glück des Meeres",max:3,cost:[0,4,8,12]},
  lure:{en:"Lure",de:"Köder",max:3,cost:[0,4,8,12]},
  mending:{en:"Mending",de:"Reparatur",max:1,cost:[0,12]},
  curse_of_vanishing:{en:"Curse of Vanishing",de:"Fluch des Verschwindens",max:1,cost:[0,4]},
  curse_of_binding:{en:"Curse of Binding",de:"Fluch der Bindung",max:1,cost:[0,4]}
};
const items={
  diamond_helmet:["protection","fire_protection","blast_protection","projectile_protection","aqua_affinity","respiration","thorns","unbreaking","mending","curse_of_vanishing","curse_of_binding"],
  turtle_shell:["protection","fire_protection","blast_protection","projectile_protection","respiration","thorns","unbreaking","mending","curse_of_vanishing","curse_of_binding"],
  diamond_chestplate:["protection","fire_protection","blast_protection","projectile_protection","thorns","unbreaking","mending","swift_sneak","curse_of_vanishing","curse_of_binding"],
  diamond_leggings:["protection","fire_protection","blast_protection","projectile_protection","thorns","unbreaking","mending","swift_sneak","curse_of_vanishing","curse_of_binding"],
  diamond_boots:["protection","fire_protection","blast_protection","projectile_protection","feather_falling","frost_walker","depth_strider","soul_speed","thorns","unbreaking","mending","curse_of_vanishing","curse_of_binding"],
  sword:["sharpness","smite","bane","knockback","fire_aspect","looting","sweeping","unbreaking","mending","curse_of_vanishing"],
  bow:["power","punch","flame","infinity","unbreaking","mending","curse_of_vanishing"],
  crossbow:["quick_charge","multishot","piercing","unbreaking","mending","curse_of_vanishing"],
  trident:["loyalty","impaling","riptide","channeling","unbreaking","mending","curse_of_vanishing"],
  pickaxe:["efficiency","unbreaking","fortune","mending","silk_touch","curse_of_vanishing"],
  axe:["efficiency","unbreaking","fortune","mending","silk_touch","sharpness","smite","bane","curse_of_vanishing"],
  shovel:["efficiency","unbreaking","fortune","mending","silk_touch","curse_of_vanishing"],
  hoe:["efficiency","unbreaking","fortune","mending","silk_touch","curse_of_vanishing"],
  shears:["efficiency","unbreaking","mending","curse_of_vanishing"],
  fishing_rod:["luck_of_the_sea","lure","unbreaking","mending","curse_of_vanishing"],
  shield:["unbreaking","mending","curse_of_vanishing"],
  elytra:["unbreaking","mending","curse_of_vanishing"],
  flint_and_steel:["unbreaking","mending","curse_of_vanishing"],
  carrot_on_a_stick:["unbreaking","mending","curse_of_vanishing"],
  warped_fungus_on_a_stick:["unbreaking","mending","curse_of_vanishing"],
  compass:["curse_of_vanishing"],
  lodestone_compass:["curse_of_vanishing"],
  recovery_compass:["curse_of_vanishing"],
  all_books:Object.keys(enchList)
};
const incompat = {
  protection:    ["fire_protection","blast_protection","projectile_protection"],
  fire_protection: ["protection","blast_protection","projectile_protection"],
  blast_protection: ["protection","fire_protection","projectile_protection"],
  projectile_protection: ["protection","fire_protection","blast_protection"],
  fortune: ["silk_touch"], silk_touch: ["fortune"],
  sharpness: ["smite","bane"], smite:["sharpness","bane"], bane:["sharpness","smite"],
  loyalty: ["riptide"], riptide:["loyalty"],
  multishot:["piercing"], piercing:["multishot"]
};
let currentItemKey='diamond_helmet', selection={};
function isIncompatible(eid, selection){
  for(const other in selection){
    if(other===eid) continue;
    if(incompat[eid]&&incompat[eid].includes(other)) return other;
    if(incompat[other]&&incompat[other].includes(eid)) return other;
  }
  return null;
}
function renderItems(){
  let row=document.getElementById('itemrow');row.innerHTML='';
  allItems.forEach(it=>{
    row.innerHTML+=
      `<button class="item-btn${currentItemKey===it.k?' selected':''}" onclick="selectItem('${it.k}')">
        ${it.txt}
      </button>`;
  });
}
function selectItem(k){currentItemKey=k;selection={};renderItems();renderEnchants();}
function renderEnchants(){
  let key=currentItemKey,arr=items[key]||[];
  let enchdiv=document.getElementById('enchants');enchdiv.innerHTML='';
  let newSelection={}; for(const e of arr) if(selection[e]) newSelection[e]=selection[e]; selection=newSelection;
  arr.forEach(e=>{
    const obj=enchList[e]; const activeLevel=selection[e]||0; let incompWith=isIncompatible(e,selection),isCurse=curseList.includes(e);
    let clab=isCurse?'ench-label curse':'';
    let label=`<span class="ench ${clab}">${obj.en}</span> <span class="dech${isCurse?' warn-bad':''}">(${obj.de})</span>`;
    let lvBtns='';
    for(let i=1;i<=obj.max;i++){
      let disabled=(activeLevel===0&&incompWith)?'disabled':'';
      let active=(activeLevel===i)?'selected':'';
      let tip='';
      if(disabled){let io=enchList[incompWith];if(io) tip = `title="Inkompatibel mit ${io.en} / ${io.de}"`;}
      lvBtns+=`<button type="button" class="lv-btn${active?' selected':''}${isCurse?' curse':''}" ${disabled} ${tip}
        onclick="clickLevel('${e}',${i},this)">${roman[i]}</button>`;
    }
    enchdiv.innerHTML+=`<div class="enchant-row"><label>${label}${isCurse?' <span class="warn-bad">! Warnung: Fluch!</span>':''}</label><div class="lv-buttons">${lvBtns}</div></div>`;
  });
}
function clickLevel(e,l){if(selection[e]===l) delete selection[e]; else selection[e]=l; renderEnchants();}
function calculate(){
  let curEnchs=Object.keys(selection).map(id=>({id,level:selection[id],cost:enchList[id].cost[selection[id]]}));
  for(let i=0;i<curEnchs.length;i++)for(let j=0;j<curEnchs.length;j++)
    {if(i>=j)continue;if((incompat[curEnchs[i].id]||[]).includes(curEnchs[j].id)||(incompat[curEnchs[j].id]||[]).includes(curEnchs[i].id)){alert("Diese Kombination ist nicht möglich:\n"+enchList[curEnchs[i].id].en+" + "+enchList[curEnchs[j].id].en);return;}}
  if(!curEnchs.length){alert("Bitte mindestens eine Verzauberung wählen!");return;}
  curEnchs.sort((a,b)=>a.cost-b.cost);
  let steps=[],maxstep=0,total=0;
  let queue=curEnchs.map(e=>{let obj=enchList[e.id],clab=curseList.includes(e.id)?'curse':'';return({label:`<b class="ench ${clab}">${obj.en}</b> <span class="dech${clab?' warn-bad':''}">(${obj.de})</span> ${roman[e.level]}`,cost:e.cost,pen:0});});
  function combine(a,b){let cst=a.cost+b.cost+Math.max(a.pen,b.pen);maxstep=Math.max(maxstep,cst);total+=cst;return {label:`${a.label} + ${b.label}`,cost:0,pen:Math.max(a.pen,b.pen)+1,raw:cst};}
  let step=1;
  while(queue.length>1){
    let next=[];for(let i=0;i<queue.length;i+=2){
      if(i+1<queue.length){let res=combine(queue[i],queue[i+1]);steps.push({txt:`Schritt ${step}: Kombiniere ${res.label}. <em>Kosten: ${res.raw} Level</em>`,cst:res.raw});next.push(res);}
      else next.push(queue[i]);
    }
    queue=next;step++;
  }
  if(queue.length){
    let renameCost=queue[0].pen+1;
    steps.push({txt:`Schritt ${step}: Endgültig alles kombinieren (${queue[0].label}) und Item benennen. <em>Kosten: ${renameCost} Level</em>`, cst:renameCost});
    total+=renameCost;maxstep=Math.max(maxstep,renameCost);
  }
  document.getElementById("steps").innerHTML='<h2>Anleitung & Gesamtkosten</h2>'+steps.map(s=>`<div class="step">${s.txt}</div>`).join('');
  let warnDiv=document.getElementById("warn");
  warnDiv.style.display=(maxstep>39)?"block":"none";
  warnDiv.textContent=(maxstep>39)?"Warnung: Mindestens ein Schritt benötigt mehr als 39 Level ('Too expensive!')":"";
  document.getElementById("exportBox").textContent=steps.map(s=>s.txt.replace(/<[^>]+>/g,'')).join("\n")+`\n\nGesamtkosten: ${total} Level`;
}
function copyExport(){navigator.clipboard.writeText(document.getElementById("exportBox").textContent);}
document.addEventListener('DOMContentLoaded',function(){
  renderItems();renderEnchants();
});
</script>
</body>
</html>
